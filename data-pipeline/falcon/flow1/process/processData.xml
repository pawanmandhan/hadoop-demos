<?xml version="1.0" encoding="UTF-8"?>
<!--
 Hourly process, ingests raw emails from all US west email servers
 -->
<process name="verizonPOC1ProcessMinHr" xmlns="uri:falcon:process:0.1">
    
    <tags>pipeline=verizonPOC1Pipeline,owner=verizon,externalSystem=RouterData</tags>
    
    <clusters>
        <cluster name="primaryCluster">
			  <validity start="2015-02-09T02:53Z" end="2015-02-10T02:53Z" />
        </cluster>
    </clusters>
    
    <parallel>1</parallel>
    <order>FIFO</order>
    <frequency>minutes(5)</frequency>
    	

    <properties>
		<property name="execution_id" value="${coord:formatTime(coord:nominalTime(), 'yyyyMMdd_HH')}" />

		<!-- TESTING CHANGE START -->
		<!-- Uncomment the two lines below for testing -->
		<!--
		<property name="report_date_value" value="20141130" />
		<property name="report_date_hour_value" value="23" />		
		-->
		<!-- Comment the two lines below for testing -->
		<property name="report_date_value" value="${coord:formatTime(coord:nominalTime(), 'yyyyMMdd')}" />
		<property name="report_date_hour_value" value="${coord:formatTime(coord:nominalTime(), 'HH')}" />		
		<!-- TESTING CHANGE END  -->

		<property name="workflow_root_dir" value="/apps/verizon/poc1" />
	
		<property name="hive_db" value="verizon_poc" />
		<property name="base_part_table_name" value="eclipse_raw_idn_vmn_perform_part" />
		<property name="base_raw_table_name" value="eclipse_raw_idn_vmn_perform_raw" />
		<property name="minute_table_name" value="eclipse_traffic_data_min" />
		<property name="hourly_table_name" value="eclipse_traffic_data_hr" />
		<property name="minute_export_table_name" value="eclipse_traffic_data_min_export" />
		<property name="hourly_export_table_name" value="eclipse_traffic_data_hr_export" />
		<property name="base_archive_table_name" value="eclipse_raw_idn_vmn_perform_raw_archive" />
		<property name="minute_archive_table_name" value="eclipse_traffic_data_min_archive" />
		<property name="hourly_archive_table_name" value="eclipse_traffic_data_hr_archive" />
		
		<property name="audit_table_name" value="verizon_poc1_job_audit_info" />
		
		<property name="daily_archive_table_name" value="eclipse_traffic_data_dly_archive" />
		<property name="daily_export_table_name" value="eclipse_traffic_data_dly_export" />
		
		<property name="EXPORT_JDBC_URL" value="jdbc:mysql://localhost:3306/verizon" />
		<property name="EXPORT_USER_ID" value="bedrock" />
		<property name="EXPORT_USER_PASSWORD" value="bedrock" />
		<property name="EXPORT_DATA_SOURCE_DIR" value="/user/verizon/vplan/" />
		<property name="EXPORT_TARGET_MIN_EXPORT_TABLE" value="traffic_data_min_export" />
		<property name="EXPORT_TARGET_HR_EXPORT_TABLE" value="traffic_data_hr_export" />
		<property name="EXPORT_TARGET_DLY_EXPORT_TABLE" value="traffic_data_dly_export" />				
		<property name="EXPORT_DATA_DELIMITER" value="|" />
														
    </properties>
 
    <workflow name="verizonPOCMinHrWorkflow" version="2.0.0"
    engine="oozie" path="/apps/verizon/poc1/falcon/wf/min_hr_workflow" />
    
	<retry policy="periodic" delay="minutes(15)" attempts="1" />
    
</process>
